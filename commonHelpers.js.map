{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 300,\n});\n\nexport function renderImages(images, isFirstPage) {\n    const galleryElement = document.querySelector('.js-gallery-list');\n    \n    if (isFirstPage) {\n        galleryElement.innerHTML = '';\n    }\n\n    if (images.length === 0 && isFirstPage) {\n        iziToast.error({\n            message: 'Sorry, there are no images matching your search. Please try again!',\n        });\n        return;\n    }\n    \n    const galleryHtml = images\n        .map(img => {\n            return `\n                <li class=\"gallery-item\">\n                    <a class=\"gallery-link\" href=\"${img.largeImageURL}\">\n                        <img src=\"${img.webformatURL}\" alt=\"${img.tags}\">\n                    </a>\n                    <ul class=\"item-info\">\n                        <li class=\"item-list\"><h3>Likes</h3><p>${img.likes}</p></li>\n                        <li class=\"item-list\"><h3>Views</h3><p>${img.views}</p></li>\n                        <li class=\"item-list\"><h3>Comments</h3><p>${img.comments}</p></li>\n                        <li class=\"item-list\"><h3>Downloads</h3><p>${img.downloads}</p></li>\n                    </ul>\n                </li>\n            `;\n        })\n        .join('');\n\n    galleryElement.insertAdjacentHTML('beforeend', galleryHtml);\n\n    gallery.refresh();\n}\n\n\n\n\n\n\n\n\n\n","\nimport axios from \"axios\";\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '44095628-d0027d9df3d6429662d87f006';\n\nexport const getPhotos = (query, page) => {\n  return axios.get(BASE_URL, {\n    params: {\n      q: query,\n      image_type: \"photo\",\n      orientation: \"horizontal\",\n      safesearch: true,\n      page: page,\n      per_page: 15,\n      key: API_KEY\n    }\n  });\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// FETCH\n// export function getPhotos(query) {\n//     const params = new URLSearchParams({\n//         q: query,\n//         image_type: \"photo\",\n//         orientation: \"horizontal\",\n//         safesearch: true,\n//         page: 1,\n//         per_page: 15,\n//         key: API_KEY\n//     });\n\n//     return fetch(`${BASE_URL}?${params.toString()}`)\n//         .then(res => {\n//             if (!res.ok) {\n//                 throw new Error(res.status);\n//             }\n//             return res.json();\n//         });\n// }","\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { renderImages } from \"./js/render-functions\";\nimport { getPhotos } from \"./js/pixabay-api\";\n\nconst form = document.querySelector('.search-form');\nconst input = document.querySelector('.search-input');\nconst loader = document.getElementById('loader');\nconst galleryElement = document.querySelector('.js-gallery-list');\nconst buttonmore = document.querySelector('.js-load-more');\n\nbuttonmore.classList.add('is-hiden');\n\nlet page = 1;\nlet query = '';\n\nconst handleClick = () => {\n  page += 1;\n  getImages(page, false);\n};\n\nbuttonmore.addEventListener('click', handleClick);\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  query = input.value.trim();\n  if (query === '') {\n    iziToast.error({\n      title: 'Error:',\n      message: 'Please enter a search term.',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  galleryElement.innerHTML = '';\n  page = 1;\n  getImages(page, true);\n  form.reset();\n});\n\nconst getImages = async (page, isFirstPage) => {\n  try {\n    loader.style.display = 'block';\n    buttonmore.classList.add('is-hiden');\n    const response = await getPhotos(query, page);\n    const images = response.data.hits;\n\n    renderImages(images, isFirstPage);\n\n    if (page > 1) {\n      galleryScroll();\n    }\n    if (response.data.totalHits <= page * 15) {\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n      return;\n    }\n    buttonmore.classList.remove('is-hiden');\n  } catch (error) {\n    iziToast.error({\n      title: 'Error:',\n      message: 'An error occurred while fetching images. Please try again later.',\n    });\n  } finally {\n    loader.style.display = 'none';\n  }\n};\n\nconst galleryScroll = () => {\n  const galleryItem = document.querySelector('.gallery-item');\n  if (galleryItem) {\n    const rect = galleryItem.getBoundingClientRect();\n    const scrollValue = rect.height * 2;\n    window.scrollBy({\n      top: scrollValue,\n      left: 0,\n      behavior: 'smooth',\n    });\n  }\n};\n"],"names":["gallery","SimpleLightbox","renderImages","images","isFirstPage","galleryElement","galleryHtml","img","BASE_URL","API_KEY","getPhotos","query","page","axios","form","input","loader","buttonmore","handleClick","getImages","event","iziToast","response","galleryScroll","galleryItem","scrollValue"],"mappings":"owBAGA,MAAMA,EAAU,IAAIC,EAAe,aAAc,CAC7C,aAAc,MACd,aAAc,GAClB,CAAC,EAEM,SAASC,EAAaC,EAAQC,EAAa,CAC9C,MAAMC,EAAiB,SAAS,cAAc,kBAAkB,EAMhE,GAJID,IACAC,EAAe,UAAY,IAG3BF,EAAO,SAAW,GAAKC,EAAa,CACpC,SAAS,MAAM,CACX,QAAS,oEACrB,CAAS,EACD,MACH,CAED,MAAME,EAAcH,EACf,IAAII,GACM;AAAA;AAAA,oDAEiCA,EAAI,aAAa;AAAA,oCACjCA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA;AAAA,iEAGLA,EAAI,KAAK;AAAA,iEACTA,EAAI,KAAK;AAAA,oEACNA,EAAI,QAAQ;AAAA,qEACXA,EAAI,SAAS;AAAA;AAAA;AAAA,aAIzE,EACA,KAAK,EAAE,EAEZF,EAAe,mBAAmB,YAAaC,CAAW,EAE1DN,EAAQ,QAAO,CACnB,CCxCA,MAAMQ,EAAW,2BACXC,EAAU,qCAEHC,EAAY,CAACC,EAAOC,IACxBC,EAAM,IAAIL,EAAU,CACzB,OAAQ,CACN,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,GACV,IAAKH,CACN,CACL,CAAG,ECVGK,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAQ,SAAS,cAAc,eAAe,EAC9CC,EAAS,SAAS,eAAe,QAAQ,EACzCX,EAAiB,SAAS,cAAc,kBAAkB,EAC1DY,EAAa,SAAS,cAAc,eAAe,EAEzDA,EAAW,UAAU,IAAI,UAAU,EAEnC,IAAIL,EAAO,EACPD,EAAQ,GAEZ,MAAMO,EAAc,IAAM,CACxBN,GAAQ,EACRO,EAAUP,EAAM,EAAK,CACvB,EAEAK,EAAW,iBAAiB,QAASC,CAAW,EAEhDJ,EAAK,iBAAiB,SAAU,MAAMM,GAAS,CAI7C,GAHAA,EAAM,eAAc,EAEpBT,EAAQI,EAAM,MAAM,OAChBJ,IAAU,GAAI,CAChBU,EAAS,MAAM,CACb,MAAO,SACP,QAAS,8BACT,SAAU,UAChB,CAAK,EACD,MACD,CAEDhB,EAAe,UAAY,GAC3BO,EAAO,EACPO,EAAUP,EAAM,EAAI,EACpBE,EAAK,MAAK,CACZ,CAAC,EAED,MAAMK,EAAY,MAAOP,EAAMR,IAAgB,CAC7C,GAAI,CACFY,EAAO,MAAM,QAAU,QACvBC,EAAW,UAAU,IAAI,UAAU,EACnC,MAAMK,EAAW,MAAMZ,EAAUC,EAAOC,CAAI,EACtCT,EAASmB,EAAS,KAAK,KAO7B,GALApB,EAAaC,EAAQC,CAAW,EAE5BQ,EAAO,GACTW,IAEED,EAAS,KAAK,WAAaV,EAAO,GAAI,CACxCS,EAAS,KAAK,CACZ,QAAS,4DACjB,CAAO,EACD,MACD,CACDJ,EAAW,UAAU,OAAO,UAAU,CACvC,MAAe,CACdI,EAAS,MAAM,CACb,MAAO,SACP,QAAS,kEACf,CAAK,CACL,QAAY,CACRL,EAAO,MAAM,QAAU,MACxB,CACH,EAEMO,EAAgB,IAAM,CAC1B,MAAMC,EAAc,SAAS,cAAc,eAAe,EAC1D,GAAIA,EAAa,CAEf,MAAMC,EADOD,EAAY,wBACA,OAAS,EAClC,OAAO,SAAS,CACd,IAAKC,EACL,KAAM,EACN,SAAU,QAChB,CAAK,CACF,CACH"}